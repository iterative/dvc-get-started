schema: '2.0'
stages:
  prepare:
    cmd: python3 src/prepare.py
    deps:
    - path: data/raw/
      md5: b6c29e96813679dd8c451c9b5ca86e2c.dir
      size: 11594722
      nfiles: 4
    - path: src/prepare.py
      md5: 83d1a9bd4957b8e77c3efd11a7715270
      size: 3783
    params:
      params.yaml:
        prepare.remix: false
        prepare.remix_split: 0.2
        prepare.seed: 20210428
    outs:
    - path: data/prepared
      md5: cd35e4ee1528a9e57daf4f7affdb7fe6.dir
      size: 54951020
      nfiles: 2
  preprocess:
    cmd: python3 src/preprocess.py
    deps:
    - path: data/prepared/
      md5: cd35e4ee1528a9e57daf4f7affdb7fe6.dir
      size: 54951020
      nfiles: 2
    - path: src/preprocess.py
      md5: 04b27fb1d8a1941209df294da86c65f9
      size: 2287
    params:
      params.yaml:
        preprocess.add_noise: false
        preprocess.noise_amount: 0.0004
        preprocess.noise_s_vs_p: 0.5
        preprocess.normalize: true
        preprocess.seed: 20210428
        preprocess.shuffle: false
    outs:
    - path: data/preprocessed/
      md5: 6b4943a36fba46ed1183f2c1970e7f5f.dir
      size: 441841020
      nfiles: 2
  train:
    cmd: python3 src/train.py
    deps:
    - path: data/preprocessed/
      md5: 6b4943a36fba46ed1183f2c1970e7f5f.dir
      size: 441841020
      nfiles: 2
    - path: src/models.py
      md5: edfd5004a83c4566f5e237f84df856c2
      size: 3179
    - path: src/train.py
      md5: 5e6afbe82da657d92455afd7a4e79aee
      size: 1863
    params:
      params.yaml:
        model.cnn.conv_kernel_size: 3
        model.cnn.conv_units: 32
        model.cnn.dense_units: 128
        model.cnn.dropout: 0.5
        model.mlp.activation: relu
        model.mlp.units: 16
        model.name: mlp
        model.optimizer: Adam
        train.batch_size: 128
        train.epochs: 10
        train.seed: 20210428
        train.validation_split: 0.2
    outs:
    - path: logs.csv
      md5: b4934a84dd5c750f1e8f0934a40cec42
      size: 3393
    - path: models/model.h5
      md5: ef8358269d38866de5f3f4330e7ba256
      size: 189856
